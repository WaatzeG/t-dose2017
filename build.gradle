group 'tdose'

apply plugin: 'java'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
    maven { url "https://clojars.org/repo" }
}

configurations {
    provided
    compile.extendsFrom provided
}
dependencies {
    compile group: 'com.google.guava', name: 'guava', version: '23.0'
    compile group: 'redis.clients', name: 'jedis', version: '2.9.0'

    provided group: 'junit', name: 'junit', version: '4.12'
    provided 'org.apache.storm:storm-core:1.1.1'
}
jar {
    classifier 'with-dependencies'
    dependsOn configurations.runtime

    from {
        (configurations.runtime - configurations.provided).collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }
    exclude('META-INF/*')
}
